@authToken = {{login.response.body.$.access_token}}
@authTokenNormal = {{loginNormal.response.body.$.access_token}}
@rootPassword = {{$processEnv MFE_ROOT_PASSWORD}}

@company = Fuzz

### LOGIN
# @name login
POST http://localhost:8080/api/oauth2/token
Content-Type: application/json

{
    "client_id": "root@local",
    "client_secret": "{{rootPassword}}"
}

### LOGIN normal user
# @name loginNormal
POST http://localhost:8080/api/oauth2/token
Content-Type: application/json

{
    "client_id": "test@local",
    "client_secret": "test123"
}


### CREATE COMPANY
POST http://localhost:8080/api/companies
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
    "tenant": "root",
    "name": "{{company}}",
    "adminGroup": "urn:admin-groups@Enersol:iam.identity.group:Enersol Administrators",
    "assetAdminGroup": "urn:admin-groups@Enersol:iam.identity.group:Enersol Asset Administrators"
}

###D DELETE COMPANY
DELETE http://localhost:8080/api/companies/urn:root:tenant.company:{{company}}
Authorization: Bearer {{authToken}}